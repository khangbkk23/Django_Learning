{% extends 'base.html' %}
{% block start %}
  <style>
    .btn-update {
      width: 60px !important;
      height: 30px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      font-weight: 600;
      border-radius: 8px;
    }
  </style>
  <div class="container d-flex flex-column justify-content-center align-items-center" style="min-height: 80vh;">
    <form class="col-6 card p-3 shadow-lg bg-white mt-3 mb-3 rounded-5" method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      <h2 class="text-center mb-2 fw-bold">Add recipe you want</h2>
      <hr />
      <div class="mb-3">
        <label for="recipeName" class="form-label">Recipe name</label>
        <input name="recipe_name" required type="text" class="form-control" id="recipeName" placeholder="Input the name of food...." />
      </div>

      <div class="mb-3">
        <label for="recipeDesc" class="form-label">Food description</label>
        <textarea name="recipe_description" class="form-control" id="recipeDesc" rows="3" placeholder="Short description about this recipe..."></textarea>
      </div>

      <div class="mb-3">
        <label for="recipeImg" class="form-label">Food image</label>
        <input name="recipe_image" required type="file" class="form-control" id="recipeImg" />
      </div>

      <div class="text-center">
        <button type="submit" class="btn btn-success px-4">Add</button>
      </div>
    </form>
    <hr />
    <div class="d-flex justify-content-center mt-5">
      <form method="get" class="card p-4 shadow-lg border-0" style="width: 500px; border-radius: 20px;">
        <h5 class="text-center mb-3 fw-bold text-primary">Search Food</h5>
        <div class="input-group">
          <input name="search" value="{{ search_term }}" type="text" class="form-control form-control-lg" placeholder="Enter recipe name..." required style="border-radius: 30px 0 0 30px; border: 2px solid #8f42f5;" />
          <button type="submit" class="btn btn-lg text-white" style="border-radius: 0 30px 30px 0; background: linear-gradient(90deg, #9697f3ff, #653cf8ff); border: none;">Search</button>
        </div>
      </form>
    </div>

    {{ recipe }}

    <table class="table table-striped table-hover mt-5">
      <thead class="table-primary">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Recipe</th>
          <th scope="col">Description</th>
          <th scope="col">Image</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for recipe in recipes %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ recipe.recipe_name }}</td>
            <td>{{ recipe.recipe_description }}</td>
            <td>
              <img src="{{ recipe.recipe_image.url }}" alt="Image" width="100" height="150" />
            </td>
            <td>
              <a href="/delete-recipe/{{ recipe.id }}" class="btn btn-update btn-danger btn-sm">Delete</a>

              <a href="/update-recipe/{{ recipe.id }}" class="btn btn-update btn-warning btn-sm">Update</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
