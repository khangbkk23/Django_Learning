<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <title>{{ page }}</title>

    {% load static %}
    <link rel="stylesheet" href="{% static 'home/css/base.css' %}" />
    {% block extra_css %}

    {% endblock %}
  </head>

  <body>
    <div class="page-wrapper">
      <!-- Header -->
      <header class="site-header bg-light shadow-sm py-3 mb-1">
        <div class="container d-flex justify-content-between align-items-center">
          <h2 class="logo mb-0">KelvinKhang Cook</h2>

          <nav class="d-flex align-items-center">
            <ul class="nav-links list-unstyled d-flex mb-0">
              <li class="me-3">
                <a href="{% url 'home:index' %}" class="btn btn-outline-secondary px-3 fw-semibold">Home</a>
              </li>
              <li class="me-3">
                <a href="{% url 'home:about' %}" class="btn btn-outline-secondary px-3 fw-semibold">About</a>
              </li>
              <li class="me-3">
                <a href="{% url 'home:contact' %}" class="btn btn-outline-secondary px-3 fw-semibold">Contact</a>
              </li>
              <li class="me-3">
                <a href="{% url 'recipes' %}" class="btn btn-outline-secondary px-3 fw-semibold">Menu</a>
              </li>
            </ul>
            <!-- ✅ Alert messages -->
            {% if messages %}
              <div class="position-fixed top-0 end-0 p-3" style="z-index: 1050;">
                {% for message in messages %}
                  <div class="alert alert-{{ message.tags }} alert-dismissible fade show shadow-lg" role="alert" style="min-width: 300px; animation: slideIn 0.4s ease-out;">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
                {% endfor %}
              </div>
            {% endif %}

            <style>
              @keyframes slideIn {
                from {
                  transform: translateX(100%);
                  opacity: 0;
                }
                to {
                  transform: translateX(0);
                  opacity: 1;
                }
              }
            </style>

            <script>
              // Tự đóng alert sau 3 giây
              document.addEventListener('DOMContentLoaded', () => {
                setTimeout(() => {
                  const alerts = document.querySelectorAll('.alert')
                  alerts.forEach((alert) => {
                    const bsAlert = bootstrap.Alert.getOrCreateInstance(alert)
                    bsAlert.close()
                  })
                }, 3000)
              })
            </script>

            <!-- Auth buttons -->
            {% if user.is_authenticated %}
              <div class="auth-buttons ms-3 d-flex align-items-center">
                <span class="me-3 fw-semibold text-warning">Good morning, {{ user.username }}</span>
                <a href="{% url 'logout' %}" class="btn btn-danger btn-sm">Log out</a>
              </div>
            {% else %}
              <div class="auth-buttons ms-3">
                <a href="{% url 'login' %}" class="btn btn-success me-2">Login</a>
                <a href="{% url 'register' %}" class="btn btn-primary">Register</a>
              </div>
            {% endif %}
          </nav>
        </div>
      </header>

      <main>
        {% block start %}

        {% endblock %}
      </main>

      <footer class="site-footer text-center py-3 bg-light mt-1">
        <p class="mb-0">&copy; {{ now|date:'Y' }} - Website của DiKhang. All rights reserved.</p>
      </footer>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    </div>
  </body>
</html>
